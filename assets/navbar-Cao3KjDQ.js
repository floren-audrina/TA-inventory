import{s as i}from"./db_conn-Cc8gtU8M.js";const a="/TA-inventory";function n(){return window.location.origin+a}async function g(){if(window.location.pathname.includes(`${a}/index.html`))return!0;const{data:{session:t},error:r}=await i.auth.getSession();return t?!0:(s(),!1)}function s(){localStorage.removeItem("sb_auth_token"),sessionStorage.removeItem("sb_auth_token"),window.location.href=`${n()}/index.html`}async function l(){try{console.log("Attempting logout..."),localStorage.removeItem("sb_auth_token"),sessionStorage.removeItem("sb_auth_token");const{error:t}=await i.auth.signOut();if(t)throw t;console.log("Logout successful, redirecting..."),window.location.href=`${n()}/index.html`}catch(t){console.error("Logout failed:",t),window.location.href=`${n()}/index.html`}}function d(){i.auth.onAuthStateChange(t=>{console.log("Auth state changed:",t),t==="SIGNED_OUT"&&s()})}const e=document.getElementById("sidebar"),o=document.getElementById("menu-toggle");o&&e&&(o.addEventListener("click",()=>{e.classList.toggle("active")}),document.addEventListener("click",t=>{!e.contains(t.target)&&!o.contains(t.target)&&e.classList.remove("active")}));function h(){const t=document.getElementById("logout-link");if(!t){console.error("Logout link not found!");return}t.addEventListener("click",async r=>{r.preventDefault(),console.log("Logout clicked");try{await l()}catch(c){console.error("Logout failed:",c),window.location.href="/index.html"}})}export{g as c,d as i,h as s};
