import{s as e}from"./db_conn.js";const n="/TA-inventory";function o(){return window.location.origin+n}async function s(){if(window.location.pathname.includes(`${n}/index.html`))return!0;const{data:{session:t},error:i}=await e.auth.getSession();return t?!0:(r(),!1)}function r(){localStorage.removeItem("sb_auth_token"),sessionStorage.removeItem("sb_auth_token"),window.location.href=`${o()}/index.html`}async function c(){try{console.log("Attempting logout..."),localStorage.removeItem("sb_auth_token"),sessionStorage.removeItem("sb_auth_token");const{error:t}=await e.auth.signOut();if(t)throw t;console.log("Logout successful, redirecting..."),window.location.href=`${o()}/index.html`}catch(t){console.error("Logout failed:",t),window.location.href=`${o()}/index.html`}}function u(){e.auth.onAuthStateChange(t=>{console.log("Auth state changed:",t),t==="SIGNED_OUT"&&r()})}export{s as c,u as i,c as l};
